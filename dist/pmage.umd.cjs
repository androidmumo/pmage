(function(l,t){typeof exports=="object"&&typeof module<"u"?t(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],t):(l=typeof globalThis<"u"?globalThis:l||self,t(l.Pmage={},l.Vue))})(this,function(l,t){"use strict";const f=t.defineComponent({__name:"index",props:{placeholder:{default:""},src:{default:""},animation:{type:Boolean,default:!0},onBeforeLoad:{default:null},blur:{default:NaN},scale:{default:NaN},time:{default:NaN},delay:{default:0}},emits:["beforeLoad","onload"],setup(r,{emit:o}){const e=r,s=t.reactive({loaded:!1,style:""});(()=>{let a="";e.blur&&(a=`--blur: ${e.blur}px;`),e.scale&&(a+=` --scale: ${e.scale};`),e.time&&(a+=` --time: ${e.time}s;`),s.style=a})();const c=t.ref(),i=t.ref(),m=t.ref(),g=()=>{const a=new Image;a.className="_pmage-placeholder";const n=document.createElement("div");n.className="_pmage-overlay-placeholder",a.onload=()=>{c.value.insertBefore(a,i.value),c.value.insertBefore(n,i.value)},a.src=e.placeholder||e.src},u=()=>{const a=new Image;a.className+=" _pmage-origin";const n=document.createElement("div");n.className="_pmage-overlay-all",a.onload=()=>{c.value.insertBefore(a,m.value),c.value.insertBefore(n,m.value),s.loaded=!0,o("onload")},a.src=e.src};return t.onMounted(()=>{g(),setTimeout(()=>{if(!e.onBeforeLoad)return u();o("beforeLoad",()=>u())},e.delay)}),(a,n)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"_pmage",ref:c,style:t.normalizeStyle(s.style),class:t.normalizeClass({_pmage:!0,"_pmage-loaded":s.loaded,"_pmage-animation":e.animation})},[t.createElementVNode("div",{ref_key:"_pmageSlotDefault",ref:i,class:"_pmage-slot-default"},[t.renderSlot(a.$slots,"default")],512),t.createElementVNode("div",{ref_key:"_pmageSlotTop",ref:m,class:"_pmage-slot-top"},[t.renderSlot(a.$slots,"top")],512)],6))}}),y="",p=r=>{const{blur:o,scale:e,time:s}=r;let d="";return d=`--blur: ${o||10}px;`,d+=` --scale: ${e||1.2};`,d+=` --time: ${s||.5}s;`,d},_={install(r,o){let e="";e=p(o||{}),e=`<style type="text/css">._pmage{${e}}</style>`,document.head.insertAdjacentHTML("beforeend",e),r.component("Pmage",f)}};l.Pmage=f,l.default=_,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
