(function(l,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(l=typeof globalThis<"u"?globalThis:l||self,e(l.Pmage={},l.Vue))})(this,function(l,e){"use strict";const i=e.defineComponent({__name:"index",props:{placeholder:{default:""},src:{default:""},animation:{type:Boolean,default:!0},onBeforeLoad:{default:null},blur:{default:10},scale:{default:1.2},time:{default:.5},delay:{default:0}},emits:["beforeLoad","onload"],setup(d,{emit:s}){const o=d,r=e.reactive({loaded:!1,style:`--blur: ${o.blur}px; --scale: ${o.scale}; --time: ${o.time}s;`}),n=e.ref(),c=e.ref(),m=e.ref(),u=()=>{const a=new Image;a.className="_pmage-placeholder";const t=document.createElement("div");t.className="_pmage-overlay-placeholder",a.onload=()=>{n.value.insertBefore(a,c.value),n.value.insertBefore(t,c.value)},a.src=o.placeholder||o.src},f=()=>{const a=new Image;a.className+=" _pmage-origin";const t=document.createElement("div");t.className="_pmage-overlay-all",a.onload=()=>{n.value.insertBefore(a,m.value),n.value.insertBefore(t,m.value),r.loaded=!0,s("onload")},a.src=o.src};return e.onMounted(()=>{u(),setTimeout(()=>{if(!o.onBeforeLoad)return f();s("beforeLoad",()=>f())},o.delay)}),(a,t)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"_pmage",ref:n,style:e.normalizeStyle(r.style),class:e.normalizeClass({_pmage:!0,"_pmage-loaded":r.loaded,"_pmage-animation":o.animation})},[e.createElementVNode("div",{ref_key:"_pmageSlotDefault",ref:c,class:"_pmage-slot-default"},[e.renderSlot(a.$slots,"default")],512),e.createElementVNode("div",{ref_key:"_pmageSlotTop",ref:m,class:"_pmage-slot-top"},[e.renderSlot(a.$slots,"top")],512)],6))}}),_="",p={install(d,s){console.log(123,s),d.component("Pmage",i)}};l.Pmage=i,l.default=p,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
